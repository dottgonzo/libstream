"use strict";
function codeStream(data) {
    if (!data) {
        throw "no data";
    }
    else if (!data.channel) {
        throw "no channel";
    }
    else if (!data.hostname && !data.rtmp_hostname && !data.http_hostname) {
        throw "no host data";
    }
    var code;
    if (!data.format)
        data.format = "desktop";
    switch (data.format) {
        case "mobile":
            if (!data.http_port)
                data.http_port = 80;
            if (!data.http_hostname && data.hostname)
                data.http_hostname = data.hostname;
            if (!data.width || !data.height) {
                data.width = 862;
                data.height = 465;
                if (!data.img) {
                    data.img = 'https://lh6.ggpht.com/NrQdFAdPSI9-hreB4C7HNhj3yXRiW1jqOOi7eFyakIx_IA-Im0huIeYCs5jTidMT2qA=w300';
                }
            }
            code = '<div style="width:' + data.width + ';height:' + data.height + ';text-align:center;"><a href="http://' + data.http_hostname + ":" + data.http_port + '/hls/' + data.channel + '.m3u8"><img src="' + data.img + '"></a></div>';
            break;
        default:
            if (!data.rtmp_port)
                data.rtmp_port = 1935;
            if (!data.rtmp_hostname && data.hostname)
                data.rtmp_hostname = data.hostname;
            if (!data.width || !data.height) {
                data.width = 862;
                data.height = 465;
                code = '<object width="' + data.width + '" height="' + data.height + '"> <param name="movie" value="https://play.kernel.online/lib/StrobeMediaPlayback.swf"></param><param name="flashvars" value="src=rtmp%3A%2F%2F' + data.rtmp_hostname + '%3A' + data.rtmp_port + '%2Flive%2F' + data.channel + '&streamType=live&scaleMode=zoom"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="direct"></param><embed src="https://play.kernel.online/lib/StrobeMediaPlayback.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="direct" width="' + data.width + '" height="' + data.height + '" flashvars="src=rtmp%3A%2F%2F' + data.rtmp_hostname + '%3A' + data.rtmp_port + '%2Flive%2F' + data.channel + '&streamType=live&scaleMode=zoom"></embed></object>';
            }
            break;
    }
    return code;
}
exports.codeStream = codeStream;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxvQkFBMkIsSUFXMUI7SUFFRyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDUixNQUFNLFNBQVMsQ0FBQztJQUNwQixDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDdkIsTUFBTSxZQUFZLENBQUM7SUFDdkIsQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7UUFDdEUsTUFBTSxjQUFjLENBQUM7SUFDekIsQ0FBQztJQUVELElBQUksSUFBSSxDQUFDO0lBRVQsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUM7SUFFMUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFFbEIsS0FBSyxRQUFRO1lBRVQsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBRXpDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUFDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUU3RSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFFOUIsSUFBSSxDQUFDLEtBQUssR0FBRyxHQUFHLENBQUM7Z0JBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO2dCQUNsQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUNaLElBQUksQ0FBQyxHQUFHLEdBQUcsZ0dBQWdHLENBQUM7Z0JBQ2hILENBQUM7WUFDTCxDQUFDO1lBRUQsSUFBSSxHQUFHLG9CQUFvQixHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsdUNBQXVDLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLGNBQWMsQ0FBQztZQUVyTyxLQUFLLENBQUM7UUFHVjtZQUVJLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFBQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUUzQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQztnQkFBQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFFN0UsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBRTlCLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztnQkFFbEIsSUFBSSxHQUFHLGlCQUFpQixHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsZ0pBQWdKLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxpWEFBaVgsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLGdDQUFnQyxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLEdBQUcsb0RBQW9ELENBQUE7WUFFejJCLENBQUM7WUFJRCxLQUFLLENBQUM7SUFHZCxDQUFDO0lBR0QsTUFBTSxDQUFDLElBQUksQ0FBQztBQUtoQixDQUFDO0FBM0VlLGtCQUFVLGFBMkV6QixDQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGNvZGVTdHJlYW0oZGF0YToge1xuICAgIGZvcm1hdD86IHN0cmluZztcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgaG9zdG5hbWU/OiBzdHJpbmc7XG4gICAgaHR0cF9wb3J0PzogbnVtYmVyO1xuICAgIGNoYW5uZWw6IHN0cmluZztcbiAgICBpbWc/OiBzdHJpbmc7XG4gICAgcnRtcF9wb3J0PzogbnVtYmVyO1xuICAgIHJ0bXBfaG9zdG5hbWU/OiBzdHJpbmc7XG4gICAgaHR0cF9ob3N0bmFtZT86IHN0cmluZztcbn0pIHtcblxuICAgIGlmICghZGF0YSkge1xuICAgICAgICB0aHJvdyBcIm5vIGRhdGFcIjtcbiAgICB9IGVsc2UgaWYgKCFkYXRhLmNoYW5uZWwpIHtcbiAgICAgICAgdGhyb3cgXCJubyBjaGFubmVsXCI7XG4gICAgfSBlbHNlIGlmICghZGF0YS5ob3N0bmFtZSAmJiAhZGF0YS5ydG1wX2hvc3RuYW1lICYmICFkYXRhLmh0dHBfaG9zdG5hbWUpIHtcbiAgICAgICAgdGhyb3cgXCJubyBob3N0IGRhdGFcIjtcbiAgICB9XG5cbiAgICBsZXQgY29kZTtcblxuICAgIGlmICghZGF0YS5mb3JtYXQpIGRhdGEuZm9ybWF0ID0gXCJkZXNrdG9wXCI7XG5cbiAgICBzd2l0Y2ggKGRhdGEuZm9ybWF0KSB7XG5cbiAgICAgICAgY2FzZSBcIm1vYmlsZVwiOlxuXG4gICAgICAgICAgICBpZiAoIWRhdGEuaHR0cF9wb3J0KSBkYXRhLmh0dHBfcG9ydCA9IDgwO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEuaHR0cF9ob3N0bmFtZSAmJiBkYXRhLmhvc3RuYW1lKSBkYXRhLmh0dHBfaG9zdG5hbWUgPSBkYXRhLmhvc3RuYW1lO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEud2lkdGggfHwgIWRhdGEuaGVpZ2h0KSB7XG5cbiAgICAgICAgICAgICAgICBkYXRhLndpZHRoID0gODYyO1xuICAgICAgICAgICAgICAgIGRhdGEuaGVpZ2h0ID0gNDY1O1xuICAgICAgICAgICAgICAgIGlmICghZGF0YS5pbWcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5pbWcgPSAnaHR0cHM6Ly9saDYuZ2dwaHQuY29tL05yUWRGQWRQU0k5LWhyZUI0QzdITmhqM3lYUmlXMWpxT09pN2VGeWFrSXhfSUEtSW0waHVJZVlDczVqVGlkTVQycUE9dzMwMCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb2RlID0gJzxkaXYgc3R5bGU9XCJ3aWR0aDonICsgZGF0YS53aWR0aCArICc7aGVpZ2h0OicgKyBkYXRhLmhlaWdodCArICc7dGV4dC1hbGlnbjpjZW50ZXI7XCI+PGEgaHJlZj1cImh0dHA6Ly8nICsgZGF0YS5odHRwX2hvc3RuYW1lICsgXCI6XCIgKyBkYXRhLmh0dHBfcG9ydCArICcvaGxzLycgKyBkYXRhLmNoYW5uZWwgKyAnLm0zdThcIj48aW1nIHNyYz1cIicgKyBkYXRhLmltZyArICdcIj48L2E+PC9kaXY+JztcblxuICAgICAgICAgICAgYnJlYWs7XG5cblxuICAgICAgICBkZWZhdWx0OlxuXG4gICAgICAgICAgICBpZiAoIWRhdGEucnRtcF9wb3J0KSBkYXRhLnJ0bXBfcG9ydCA9IDE5MzU7XG5cbiAgICAgICAgICAgIGlmICghZGF0YS5ydG1wX2hvc3RuYW1lICYmIGRhdGEuaG9zdG5hbWUpIGRhdGEucnRtcF9ob3N0bmFtZSA9IGRhdGEuaG9zdG5hbWU7XG5cbiAgICAgICAgICAgIGlmICghZGF0YS53aWR0aCB8fCAhZGF0YS5oZWlnaHQpIHtcblxuICAgICAgICAgICAgICAgIGRhdGEud2lkdGggPSA4NjI7XG4gICAgICAgICAgICAgICAgZGF0YS5oZWlnaHQgPSA0NjU7XG5cbiAgICAgICAgICAgICAgICBjb2RlID0gJzxvYmplY3Qgd2lkdGg9XCInICsgZGF0YS53aWR0aCArICdcIiBoZWlnaHQ9XCInICsgZGF0YS5oZWlnaHQgKyAnXCI+IDxwYXJhbSBuYW1lPVwibW92aWVcIiB2YWx1ZT1cImh0dHBzOi8vcGxheS5rZXJuZWwub25saW5lL2xpYi9TdHJvYmVNZWRpYVBsYXliYWNrLnN3ZlwiPjwvcGFyYW0+PHBhcmFtIG5hbWU9XCJmbGFzaHZhcnNcIiB2YWx1ZT1cInNyYz1ydG1wJTNBJTJGJTJGJyArIGRhdGEucnRtcF9ob3N0bmFtZSArICclM0EnICsgZGF0YS5ydG1wX3BvcnQgKyAnJTJGbGl2ZSUyRicgKyBkYXRhLmNoYW5uZWwgKyAnJnN0cmVhbVR5cGU9bGl2ZSZzY2FsZU1vZGU9em9vbVwiPjwvcGFyYW0+PHBhcmFtIG5hbWU9XCJhbGxvd0Z1bGxTY3JlZW5cIiB2YWx1ZT1cInRydWVcIj48L3BhcmFtPjxwYXJhbSBuYW1lPVwiYWxsb3dzY3JpcHRhY2Nlc3NcIiB2YWx1ZT1cImFsd2F5c1wiPjwvcGFyYW0+PHBhcmFtIG5hbWU9XCJ3bW9kZVwiIHZhbHVlPVwiZGlyZWN0XCI+PC9wYXJhbT48ZW1iZWQgc3JjPVwiaHR0cHM6Ly9wbGF5Lmtlcm5lbC5vbmxpbmUvbGliL1N0cm9iZU1lZGlhUGxheWJhY2suc3dmXCIgdHlwZT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIgYWxsb3dzY3JpcHRhY2Nlc3M9XCJhbHdheXNcIiBhbGxvd2Z1bGxzY3JlZW49XCJ0cnVlXCIgd21vZGU9XCJkaXJlY3RcIiB3aWR0aD1cIicgKyBkYXRhLndpZHRoICsgJ1wiIGhlaWdodD1cIicgKyBkYXRhLmhlaWdodCArICdcIiBmbGFzaHZhcnM9XCJzcmM9cnRtcCUzQSUyRiUyRicgKyBkYXRhLnJ0bXBfaG9zdG5hbWUgKyAnJTNBJyArIGRhdGEucnRtcF9wb3J0ICsgJyUyRmxpdmUlMkYnICsgZGF0YS5jaGFubmVsICsgJyZzdHJlYW1UeXBlPWxpdmUmc2NhbGVNb2RlPXpvb21cIj48L2VtYmVkPjwvb2JqZWN0PidcblxuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgYnJlYWs7XG5cblxuICAgIH1cblxuXG4gICAgcmV0dXJuIGNvZGU7XG5cblxuXG5cbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
