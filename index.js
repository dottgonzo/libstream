"use strict";
function codeStream(data) {
    if (!data) {
        throw "no data";
    }
    else if (!data.channel) {
        throw "no channel";
    }
    else if (!data.hostname && !data.rtmp_hostname && !data.http_hostname) {
        throw "no host data";
    }
    var code;
    if (!data.format)
        data.format = "desktop";
    switch (data.format) {
        case "mobile":
            if (!data.protocol)
                data.protocol = "http";
            if (!data.http_port)
                data.http_port = 80;
            if (!data.http_hostname && data.hostname)
                data.http_hostname = data.hostname;
            if (!data.width) {
                data.width = 862;
                data.height = 465;
            }
            else if (!data.height) {
                data.height = (1080 * data.width) / 1920;
            }
            if (!data.img) {
                data.img = 'https://lh6.ggpht.com/NrQdFAdPSI9-hreB4C7HNhj3yXRiW1jqOOi7eFyakIx_IA-Im0huIeYCs5jTidMT2qA=w300';
            }
            code = '<div style="width:' + data.width + ';height:' + data.height + ';text-align:center;"><a href="http://' + data.http_hostname + ":" + data.http_port + '/hls/' + data.channel + '.m3u8"><img style="max-width:150px" src="' + data.img + '"></a></div>';
            break;
        default:
            if (!data.rtmp_port)
                data.rtmp_port = 1935;
            if (!data.rtmp_hostname && data.hostname)
                data.rtmp_hostname = data.hostname;
            if (!data.width) {
                data.width = 862;
                data.height = 465;
            }
            else if (!data.height) {
                data.height = (1080 * data.width) / 1920;
            }
            code = '<object width="' + data.width + '" height="' + data.height + '"> <param name="movie" value="https://play.kernel.online/lib/StrobeMediaPlayback.swf"></param><param name="flashvars" value="src=rtmp%3A%2F%2F' + data.rtmp_hostname + '%3A' + data.rtmp_port + '%2Flive%2F' + data.channel + '&streamType=live&scaleMode=zoom"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="direct"></param><embed src="https://play.kernel.online/lib/StrobeMediaPlayback.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="direct" width="' + data.width + '" height="' + data.height + '" flashvars="src=rtmp%3A%2F%2F' + data.rtmp_hostname + '%3A' + data.rtmp_port + '%2Flive%2F' + data.channel + '&streamType=live&scaleMode=zoom"></embed></object>';
            break;
    }
    return code;
}
exports.codeStream = codeStream;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFnQkEsb0JBQTJCLElBQWlCO0lBRXhDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNSLE1BQU0sU0FBUyxDQUFDO0lBQ3BCLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUN2QixNQUFNLFlBQVksQ0FBQztJQUN2QixDQUFDO0lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQztRQUN0RSxNQUFNLGNBQWMsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxJQUFJLENBQUM7SUFFVCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFBQyxJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztJQUUxQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUVsQixLQUFLLFFBQVE7WUFFVCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFFM0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1lBRXpDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUFDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUU3RSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUVmLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztZQUV0QixDQUFDO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFDLElBQUksQ0FBQztZQUN6QyxDQUFDO1lBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDWixJQUFJLENBQUMsR0FBRyxHQUFHLGdHQUFnRyxDQUFDO1lBQ2hILENBQUM7WUFDRCxJQUFJLEdBQUcsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxVQUFVLEdBQUcsSUFBSSxDQUFDLE1BQU0sR0FBRyx1Q0FBdUMsR0FBRyxJQUFJLENBQUMsYUFBYSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxHQUFHLDJDQUEyQyxHQUFHLElBQUksQ0FBQyxHQUFHLEdBQUcsY0FBYyxDQUFDO1lBRTdQLEtBQUssQ0FBQztRQUdWO1lBRUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO2dCQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1lBRTNDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO2dCQUFDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUU3RSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUVmLElBQUksQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO2dCQUNqQixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztZQUV0QixDQUFDO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBLENBQUM7Z0JBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFDLElBQUksQ0FBQztZQUN6QyxDQUFDO1lBRUQsSUFBSSxHQUFHLGlCQUFpQixHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsZ0pBQWdKLEdBQUcsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxpWEFBaVgsR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLGdDQUFnQyxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxPQUFPLEdBQUcsb0RBQW9ELENBQUE7WUFHcjJCLEtBQUssQ0FBQztJQUdkLENBQUM7SUFHRCxNQUFNLENBQUMsSUFBSSxDQUFDO0FBS2hCLENBQUM7QUF0RWUsa0JBQVUsYUFzRXpCLENBQUEiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBpbnRlcmZhY2UgSWNvZGVTdHJlYW0ge1xuICAgIGZvcm1hdD86IHN0cmluZztcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgaG9zdG5hbWU/OiBzdHJpbmc7XG4gICAgaHR0cF9wb3J0PzogbnVtYmVyO1xuICAgIGNoYW5uZWw6IHN0cmluZztcbiAgICBpbWc/OiBzdHJpbmc7XG4gICAgcnRtcF9wb3J0PzogbnVtYmVyO1xuICAgIHJ0bXBfaG9zdG5hbWU/OiBzdHJpbmc7XG4gICAgaHR0cF9ob3N0bmFtZT86IHN0cmluZztcbiAgICBwcm90b2NvbD86IHN0cmluZztcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gY29kZVN0cmVhbShkYXRhOiBJY29kZVN0cmVhbSkge1xuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIHRocm93IFwibm8gZGF0YVwiO1xuICAgIH0gZWxzZSBpZiAoIWRhdGEuY2hhbm5lbCkge1xuICAgICAgICB0aHJvdyBcIm5vIGNoYW5uZWxcIjtcbiAgICB9IGVsc2UgaWYgKCFkYXRhLmhvc3RuYW1lICYmICFkYXRhLnJ0bXBfaG9zdG5hbWUgJiYgIWRhdGEuaHR0cF9ob3N0bmFtZSkge1xuICAgICAgICB0aHJvdyBcIm5vIGhvc3QgZGF0YVwiO1xuICAgIH1cblxuICAgIGxldCBjb2RlO1xuXG4gICAgaWYgKCFkYXRhLmZvcm1hdCkgZGF0YS5mb3JtYXQgPSBcImRlc2t0b3BcIjtcblxuICAgIHN3aXRjaCAoZGF0YS5mb3JtYXQpIHtcblxuICAgICAgICBjYXNlIFwibW9iaWxlXCI6XG5cbiAgICAgICAgICAgIGlmICghZGF0YS5wcm90b2NvbCkgZGF0YS5wcm90b2NvbCA9IFwiaHR0cFwiO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEuaHR0cF9wb3J0KSBkYXRhLmh0dHBfcG9ydCA9IDgwO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEuaHR0cF9ob3N0bmFtZSAmJiBkYXRhLmhvc3RuYW1lKSBkYXRhLmh0dHBfaG9zdG5hbWUgPSBkYXRhLmhvc3RuYW1lO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEud2lkdGggKSB7XG5cbiAgICAgICAgICAgICAgICBkYXRhLndpZHRoID0gODYyO1xuICAgICAgICAgICAgICAgIGRhdGEuaGVpZ2h0ID0gNDY1O1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYoIWRhdGEuaGVpZ2h0KXtcbiAgICAgICAgICAgICAgICBkYXRhLmhlaWdodCA9ICgxMDgwKmRhdGEud2lkdGgpLzE5MjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZGF0YS5pbWcpIHtcbiAgICAgICAgICAgICAgICBkYXRhLmltZyA9ICdodHRwczovL2xoNi5nZ3BodC5jb20vTnJRZEZBZFBTSTktaHJlQjRDN0hOaGozeVhSaVcxanFPT2k3ZUZ5YWtJeF9JQS1JbTBodUllWUNzNWpUaWRNVDJxQT13MzAwJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvZGUgPSAnPGRpdiBzdHlsZT1cIndpZHRoOicgKyBkYXRhLndpZHRoICsgJztoZWlnaHQ6JyArIGRhdGEuaGVpZ2h0ICsgJzt0ZXh0LWFsaWduOmNlbnRlcjtcIj48YSBocmVmPVwiaHR0cDovLycgKyBkYXRhLmh0dHBfaG9zdG5hbWUgKyBcIjpcIiArIGRhdGEuaHR0cF9wb3J0ICsgJy9obHMvJyArIGRhdGEuY2hhbm5lbCArICcubTN1OFwiPjxpbWcgc3R5bGU9XCJtYXgtd2lkdGg6MTUwcHhcIiBzcmM9XCInICsgZGF0YS5pbWcgKyAnXCI+PC9hPjwvZGl2Pic7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG5cbiAgICAgICAgZGVmYXVsdDpcblxuICAgICAgICAgICAgaWYgKCFkYXRhLnJ0bXBfcG9ydCkgZGF0YS5ydG1wX3BvcnQgPSAxOTM1O1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEucnRtcF9ob3N0bmFtZSAmJiBkYXRhLmhvc3RuYW1lKSBkYXRhLnJ0bXBfaG9zdG5hbWUgPSBkYXRhLmhvc3RuYW1lO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEud2lkdGggKSB7XG5cbiAgICAgICAgICAgICAgICBkYXRhLndpZHRoID0gODYyO1xuICAgICAgICAgICAgICAgIGRhdGEuaGVpZ2h0ID0gNDY1O1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYoIWRhdGEuaGVpZ2h0KXtcbiAgICAgICAgICAgICAgICBkYXRhLmhlaWdodCA9ICgxMDgwKmRhdGEud2lkdGgpLzE5MjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvZGUgPSAnPG9iamVjdCB3aWR0aD1cIicgKyBkYXRhLndpZHRoICsgJ1wiIGhlaWdodD1cIicgKyBkYXRhLmhlaWdodCArICdcIj4gPHBhcmFtIG5hbWU9XCJtb3ZpZVwiIHZhbHVlPVwiaHR0cHM6Ly9wbGF5Lmtlcm5lbC5vbmxpbmUvbGliL1N0cm9iZU1lZGlhUGxheWJhY2suc3dmXCI+PC9wYXJhbT48cGFyYW0gbmFtZT1cImZsYXNodmFyc1wiIHZhbHVlPVwic3JjPXJ0bXAlM0ElMkYlMkYnICsgZGF0YS5ydG1wX2hvc3RuYW1lICsgJyUzQScgKyBkYXRhLnJ0bXBfcG9ydCArICclMkZsaXZlJTJGJyArIGRhdGEuY2hhbm5lbCArICcmc3RyZWFtVHlwZT1saXZlJnNjYWxlTW9kZT16b29tXCI+PC9wYXJhbT48cGFyYW0gbmFtZT1cImFsbG93RnVsbFNjcmVlblwiIHZhbHVlPVwidHJ1ZVwiPjwvcGFyYW0+PHBhcmFtIG5hbWU9XCJhbGxvd3NjcmlwdGFjY2Vzc1wiIHZhbHVlPVwiYWx3YXlzXCI+PC9wYXJhbT48cGFyYW0gbmFtZT1cIndtb2RlXCIgdmFsdWU9XCJkaXJlY3RcIj48L3BhcmFtPjxlbWJlZCBzcmM9XCJodHRwczovL3BsYXkua2VybmVsLm9ubGluZS9saWIvU3Ryb2JlTWVkaWFQbGF5YmFjay5zd2ZcIiB0eXBlPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIiBhbGxvd3NjcmlwdGFjY2Vzcz1cImFsd2F5c1wiIGFsbG93ZnVsbHNjcmVlbj1cInRydWVcIiB3bW9kZT1cImRpcmVjdFwiIHdpZHRoPVwiJyArIGRhdGEud2lkdGggKyAnXCIgaGVpZ2h0PVwiJyArIGRhdGEuaGVpZ2h0ICsgJ1wiIGZsYXNodmFycz1cInNyYz1ydG1wJTNBJTJGJTJGJyArIGRhdGEucnRtcF9ob3N0bmFtZSArICclM0EnICsgZGF0YS5ydG1wX3BvcnQgKyAnJTJGbGl2ZSUyRicgKyBkYXRhLmNoYW5uZWwgKyAnJnN0cmVhbVR5cGU9bGl2ZSZzY2FsZU1vZGU9em9vbVwiPjwvZW1iZWQ+PC9vYmplY3Q+J1xuXG5cbiAgICAgICAgICAgIGJyZWFrO1xuXG5cbiAgICB9XG5cblxuICAgIHJldHVybiBjb2RlO1xuXG5cblxuXG59Il19
